# Django + Tailwind CSS Reference

This reference covers integrating Tailwind CSS with Django projects. Two approaches are available: standalone CLI (no Node.js) and npm-based (full customization).

## Setup: Standalone CLI (Recommended)

The standalone approach uses `django-tailwind-cli` with the Tailwind binary. No Node.js required.

```bash
pip install django-tailwind-cli
```

```python
# settings/base.py
INSTALLED_APPS = [
    'django_tailwind_cli',
    # ...
]

STATICFILES_DIRS = [BASE_DIR / 'assets']
```

```html
{# templates/base.html #}
{% load tailwind_cli %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% tailwind_css %}
</head>
<body>
    {% block content %}{% endblock %}
</body>
</html>
```

### Development workflow

```bash
# Combined Django + Tailwind watcher (recommended)
python manage.py tailwind runserver

# Or separate processes
python manage.py tailwind watch   # terminal 1
python manage.py runserver        # terminal 2
```

### Production build

```bash
python manage.py tailwind build
python manage.py collectstatic --noinput
```

Build must run before `collectstatic`. The CLI auto-downloads on first run; pin a version in production:

```python
# settings/production.py
TAILWIND_CLI_VERSION = '4.1.3'
TAILWIND_CLI_AUTOMATIC_DOWNLOAD = False
TAILWIND_CLI_PATH = '/usr/local/bin/tailwindcss'  # pre-installed in Docker
```

### Configuration options

```python
# settings/base.py
TAILWIND_CLI_SRC_CSS = '.django_tailwind_cli/source.css'  # input CSS
TAILWIND_CLI_DIST_CSS = 'css/tailwind.css'                 # output CSS
TAILWIND_CLI_USE_DAISY_UI = False                          # enable DaisyUI components
```

For multiple CSS entry points (e.g., separate admin and public stylesheets):

```python
TAILWIND_CLI_CSS_MAP = [
    ('styles/admin.css', 'css/admin.css'),
    ('styles/studio.css', 'css/studio.css'),
]
```

```html
{% tailwind_css "admin" %}   {# loads the admin stylesheet #}
{% tailwind_css "studio" %}  {# loads the studio stylesheet #}
```

## Setup: npm-Based (Full Customization)

Use `django-tailwind` when you need full npm plugin support, PostCSS processing, or Tailwind v3 compatibility.

```bash
pip install 'django-tailwind[cookiecutter,honcho,reload]'
```

```python
# settings/base.py
INSTALLED_APPS = [
    'tailwind',
    'theme',  # generated by tailwind init
    # ...
]
TAILWIND_APP_NAME = 'theme'
```

```bash
python manage.py tailwind init    # creates theme app
python manage.py tailwind install # installs npm dependencies
python manage.py tailwind dev     # runs Django + Tailwind via Honcho
```

### Tailwind configuration

For Tailwind v4, the `@source` directive in CSS replaces the `content` array:

```css
/* theme/static_src/src/styles.css */
@import "tailwindcss";
@source "../../templates/**/*.html";
@source "../../../apps/**/templates/**/*.html";
```

For Tailwind v3, use `tailwind.config.js`:

```javascript
module.exports = {
    content: [
        '../templates/**/*.html',
        '../../templates/**/*.html',
        '../../**/templates/**/*.html',
    ],
    theme: { extend: {} },
    plugins: [
        require('@tailwindcss/forms'),
        require('@tailwindcss/typography'),
    ],
}
```

### Template tag

```html
{% load tailwind_tags %}
{% tailwind_css %}
```

### Production build

```bash
python manage.py tailwind build
```

Runs with `NODE_ENV=production`, minifies output, and purges unused classes via the content/source configuration.

## Template Patterns

### Utility-first layout for content cards

```html
{# templates/content/_essay_card.html #}
<div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
    <div class="flex justify-between items-start mb-4">
        <h3 class="text-lg font-semibold text-gray-900">
            {{ essay.title }}
        </h3>
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
            {% if essay.stage == 'published' %}bg-green-100 text-green-800
            {% elif essay.stage == 'production' %}bg-purple-100 text-purple-800
            {% else %}bg-gray-100 text-gray-800{% endif %}">
            {{ essay.get_stage_display }}
        </span>
    </div>
    <dl class="grid grid-cols-2 gap-x-4 gap-y-2 text-sm">
        <dt class="text-gray-500">Slug</dt>
        <dd class="text-gray-900">{{ essay.slug }}</dd>
        <dt class="text-gray-500">Stage</dt>
        <dd class="text-gray-900">{{ essay.get_stage_display }}</dd>
        <dt class="text-gray-500">Word Count</dt>
        <dd class="text-gray-900">{{ essay.word_count|intcomma }}</dd>
    </dl>
</div>
```

### Responsive layout

```html
{# templates/content/essay_list.html #}
{% extends 'base_studio.html' %}

{% block page_content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-900">Essays</h1>
        <a href="{% url 'content:essay-create' %}"
           class="inline-flex items-center px-4 py-2 bg-primary-600 text-white
                  rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2
                  focus:ring-offset-2 focus:ring-primary-500 text-sm font-medium">
            New Essay
        </a>
    </div>

    {# Responsive grid: 1 col mobile, 2 col tablet, 3 col desktop #}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for essay in page %}
            {% include 'content/_essay_card.html' %}
        {% empty %}
            <p class="col-span-full text-gray-500 text-center py-12">
                No essays found.
            </p>
        {% endfor %}
    </div>

    {% include 'includes/pagination.html' with page_obj=page %}
</div>
{% endblock %}
```

### Dark mode

Tailwind supports dark mode via the `dark:` variant. Use the `class` strategy for user-controlled themes (see design-system.md for theme architecture):

```html
<div class="bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
            border border-gray-200 dark:border-gray-700 rounded-lg p-4">
    <h3 class="font-semibold">{{ essay.title }}</h3>
    <p class="text-gray-600 dark:text-gray-400">{{ essay.get_stage_display }}</p>
</div>
```

Toggle dark mode on the `<html>` element:

```html
<html class="dark"> {# enables dark mode across the page #}
```

### Form styling with @tailwindcss/forms

```html
<form method="post" class="space-y-6">
    {% csrf_token %}
    <div>
        <label for="{{ form.title.id_for_label }}"
               class="block text-sm font-medium text-gray-700">
            Title
        </label>
        <input type="text" name="{{ form.title.name }}"
               id="{{ form.title.id_for_label }}"
               value="{{ form.title.value|default:'' }}"
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm
                      focus:border-primary-500 focus:ring-primary-500 sm:text-sm
                      {% if form.title.errors %}border-red-500{% endif %}">
        {% for error in form.title.errors %}
            <p class="mt-1 text-sm text-red-600">{{ error }}</p>
        {% endfor %}
    </div>
    <button type="submit"
            class="w-full flex justify-center py-2 px-4 border border-transparent
                   rounded-md shadow-sm text-sm font-medium text-white bg-primary-600
                   hover:bg-primary-700 focus:outline-none focus:ring-2
                   focus:ring-offset-2 focus:ring-primary-500">
        Save Essay
    </button>
</form>
```

For reusable form field components, use django-cotton (see templates.md for component patterns).

## Tailwind with Cotton Components

Cotton components work naturally with Tailwind utility classes. Pass classes as attributes:

```html
{# templates/cotton/badge.html #}
<c-vars
    variant="default"
    class="" />

{% with colors="default:bg-gray-100 text-gray-800,success:bg-green-100 text-green-800,warning:bg-yellow-100 text-yellow-800,error:bg-red-100 text-red-800" %}
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{ class }}"
      {{ attrs }}>
    {{ slot }}
</span>
{% endwith %}
```

Usage:

```html
<c-badge variant="success">Published</c-badge>
<c-badge variant="warning">In Production</c-badge>
```

See templates.md for full Cotton component patterns and design-system.md for color token conventions.

## Docker Setup

```dockerfile
# Dockerfile
FROM python:3.12-slim
WORKDIR /app
COPY requirements/production.txt .
RUN pip install -r production.txt
COPY . .
RUN python manage.py tailwind build
RUN python manage.py collectstatic --noinput
```

For `docker-compose.yml` development with live reloading:

```yaml
services:
  web:
    build: .
    command: python manage.py tailwind runserver 0.0.0.0:8000
    tty: true  # required for Tailwind CLI watcher
    volumes:
      - .:/app
    ports:
      - "8000:8000"
```

The `tty: true` setting is required for the Tailwind CLI file watcher to function inside Docker.

## Choosing an Approach

| Aspect | Standalone CLI | npm-based |
|--------|---------------|-----------|
| Node.js required | No | Yes |
| Setup complexity | Simple | Moderate |
| Tailwind versions | v4 only | v3 and v4 |
| PostCSS plugins | No | Yes |
| DaisyUI | Via tailwind-cli-extra | Direct npm install |
| Custom plugins | Limited | Full |
| Best for | Solo devs, simple projects | Teams, complex builds |

**Default recommendation:** Start with standalone CLI. Switch to npm-based if you need PostCSS plugins, Tailwind v3, or custom JavaScript-based plugins beyond what DaisyUI provides.

## Anti-Patterns

- **Inline styles alongside Tailwind.** Pick one approach. Mixing `style="color: red"` with `text-red-600` creates maintenance confusion.
- **Not purging in production.** Unpurged Tailwind CSS is 3MB+. Always run `tailwind build` before `collectstatic`.
- **Custom CSS for things Tailwind handles.** Before writing `.card-header { padding: 1rem; }`, check if `p-4` works.
- **Forgetting `tty: true` in Docker.** The Tailwind CLI watcher silently fails without a TTY. Development builds will not update.
- **Hardcoding colors instead of using theme tokens.** Use `bg-primary-600` (customizable) over `bg-blue-600` (fixed). See design-system.md for token conventions.
